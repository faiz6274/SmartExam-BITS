{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport api from \"../api/axios\";\nimport { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function InstructorScreen(_ref) {\n  var _route$params;\n  var route = _ref.route,\n    navigation = _ref.navigation;\n  var submission = (_route$params = route.params) == null ? void 0 : _route$params.submission;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    details = _useState2[0],\n    setDetails = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    comment = _useState4[0],\n    setComment = _useState4[1];\n  var load = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var res = yield api.get(\"submissions/\" + submission.id + \"/\");\n        setDetails(res.data);\n      } catch (e) {\n        console.error(e);\n      }\n    });\n    return function load() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var postComment = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (!comment.trim()) return Alert.alert('Empty', 'Please enter a comment');\n      try {\n        yield api.post('comments/', {\n          submission: submission.id,\n          text: comment\n        });\n        setComment('');\n        load();\n        Alert.alert('Saved', 'Comment added');\n      } catch (e) {\n        console.error(e);\n        Alert.alert('Failed', 'Could not add comment.');\n      }\n    });\n    return function postComment() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  useEffect(function () {\n    if (submission) load();\n  }, [submission]);\n  if (!submission) return _jsx(View, {\n    children: _jsx(Text, {\n      style: {\n        padding: 16\n      },\n      children: \"No submission selected\"\n    })\n  });\n  return _jsx(View, {\n    style: {\n      flex: 1,\n      padding: 12\n    },\n    children: details ? _jsxs(_Fragment, {\n      children: [_jsxs(Text, {\n        style: {\n          fontWeight: '700'\n        },\n        children: [\"Submission #\", details.id]\n      }), _jsxs(Text, {\n        children: [\"Student: \", details.student]\n      }), _jsx(Text, {\n        children: \"Files:\"\n      }), _jsx(FlatList, {\n        data: details.files,\n        keyExtractor: function keyExtractor(f) {\n          return String(f.id);\n        },\n        renderItem: function renderItem(_ref4) {\n          var item = _ref4.item;\n          return _jsx(View, {\n            style: {\n              padding: 8\n            },\n            children: _jsx(Button, {\n              title: \"Open file \" + item.id,\n              onPress: function onPress() {}\n            })\n          });\n        }\n      }), _jsx(Text, {\n        style: {\n          marginTop: 12\n        },\n        children: \"Comments\"\n      }), _jsx(FlatList, {\n        data: details.comments,\n        keyExtractor: function keyExtractor(c) {\n          return String(c.id);\n        },\n        renderItem: function renderItem(_ref5) {\n          var item = _ref5.item;\n          return _jsxs(View, {\n            style: {\n              padding: 8\n            },\n            children: [_jsx(Text, {\n              style: {\n                fontWeight: '600'\n              },\n              children: item.instructor\n            }), _jsx(Text, {\n              children: item.text\n            })]\n          });\n        },\n        ListEmptyComponent: function ListEmptyComponent() {\n          return _jsx(Text, {\n            style: {\n              padding: 8\n            },\n            children: \"No comments yet\"\n          });\n        }\n      }), _jsx(TextInput, {\n        placeholder: \"Add comment\",\n        value: comment,\n        onChangeText: setComment,\n        style: {\n          borderWidth: 1,\n          padding: 8,\n          marginTop: 8\n        }\n      }), _jsx(Button, {\n        title: \"Save Comment\",\n        onPress: postComment\n      })]\n    }) : _jsx(Text, {\n      children: \"Loading...\"\n    })\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","View","Text","Button","FlatList","TextInput","Alert","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","InstructorScreen","_ref","_route$params","route","navigation","submission","params","_useState","_useState2","_slicedToArray","details","setDetails","_useState3","_useState4","comment","setComment","load","_ref2","_asyncToGenerator","res","get","id","data","e","console","error","apply","arguments","postComment","_ref3","trim","alert","post","text","children","style","padding","flex","fontWeight","student","files","keyExtractor","f","String","renderItem","_ref4","item","title","onPress","marginTop","comments","c","_ref5","instructor","ListEmptyComponent","placeholder","value","onChangeText","borderWidth"],"sources":["C:/Users/muham/Downloads/SmartExam-BITS/SmartExam_Frontend/src/screens/InstructorScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { View, Text, Button, FlatList, TextInput, Alert } from 'react-native';\r\nimport api from '../api/axios';\r\n\r\nexport default function InstructorScreen({ route, navigation }) {\r\n  const submission = route.params?.submission;\r\n  const [details, setDetails] = useState(null);\r\n  const [comment, setComment] = useState('');\r\n\r\n  const load = async () => {\r\n    try {\r\n      const res = await api.get(`submissions/${submission.id}/`);\r\n      setDetails(res.data);\r\n    } catch (e) { console.error(e); }\r\n  };\r\n\r\n  const postComment = async () => {\r\n    if (!comment.trim()) return Alert.alert('Empty', 'Please enter a comment');\r\n    try {\r\n      await api.post('comments/', { submission: submission.id, text: comment });\r\n      setComment('');\r\n      load();\r\n      Alert.alert('Saved', 'Comment added');\r\n    } catch (e) { console.error(e); Alert.alert('Failed', 'Could not add comment.'); }\r\n  };\r\n\r\n  useEffect(() => { if (submission) load(); }, [submission]);\r\n\r\n  if (!submission) return <View><Text style={{ padding: 16 }}>No submission selected</Text></View>;\r\n\r\n  return (\r\n    <View style={{ flex: 1, padding: 12 }}>\r\n      {details ? (\r\n        <>\r\n          <Text style={{ fontWeight: '700' }}>Submission #{details.id}</Text>\r\n          <Text>Student: {details.student}</Text>\r\n          <Text>Files:</Text>\r\n          <FlatList data={details.files} keyExtractor={(f) => String(f.id)} renderItem={({ item }) => (\r\n            <View style={{ padding: 8 }}>\r\n              <Button title={`Open file ${item.id}`} onPress={() => {\r\n                // open S3 link in browser via Linking\r\n                // import Linking from 'react-native' if you want to open\r\n              }} />\r\n            </View>\r\n          )} />\r\n\r\n          <Text style={{ marginTop: 12 }}>Comments</Text>\r\n          <FlatList data={details.comments} keyExtractor={(c) => String(c.id)} renderItem={({ item }) => (\r\n            <View style={{ padding: 8 }}>\r\n              <Text style={{ fontWeight: '600' }}>{item.instructor}</Text>\r\n              <Text>{item.text}</Text>\r\n            </View>\r\n          )} ListEmptyComponent={() => <Text style={{ padding: 8 }}>No comments yet</Text>} />\r\n\r\n          <TextInput placeholder=\"Add comment\" value={comment} onChangeText={setComment} style={{ borderWidth: 1, padding: 8, marginTop: 8 }} />\r\n          <Button title=\"Save Comment\" onPress={postComment} />\r\n        </>\r\n      ) : (\r\n        <Text>Loading...</Text>\r\n      )}\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}